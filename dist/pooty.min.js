window=window||{},function(t,e,i){function n(t){for(var e in t)t.hasOwnProperty(e)&&("object"==typeof t[e]?n(t[e]):t[e]=null)}var o=t.Pooty=t.Athlete=function(t){return o.state[t]};return o.error=function(t,e,i){throw i?(console.error(t+": "+e),Error(i)):Error(t+": "+e)},e?(o.models=o.models||{},o.controllers=o.controllers||{},o.state=o.state||{},o.fns=o.fns||{},o.templates=o.templates||{},o.model=function(t){return o.utility.check(t,["string","object"],"Pooty.model()")?"string"==typeof t?function(e){o.utility.check(e,["object"],"Pooty.model()")&&(o.models[t]=e,o.state[t]=o.utility.clean(e))}:(o.models.universal=t,void(o.state.universal=o.utility.clean(t))):void 0},o.control=function(t){return o.utility.check(t,["string","function"],"Pooty.control()")?"string"==typeof t?function(e){o.utility.check(e,["function"],"Pooty.control()")&&(o.controllers[t]=e)}:void(o.controllers.universal=t):void 0},o.fn=function(t){return o.utility.check(t,["string"],"Pooty.fn()")?function(e){o.utility.check(e,["function"],"Pooty.fn()")&&(o.fns[t]=e)}:void 0},o.template=function(){var t=Array.prototype.slice.call(arguments);t.forEach(function(t){o.templates.push(e.get(t))})},o.resource={controllerScope:function(t,i){var n=this;return n.mainModel=t,n.mainState=i,n.functions={useModel:function(t){if(o.utility.check(t,["string"],"this.loadModel()")){var e=o.models[t],i=o.state[t];if(!e||!i)return o.error("No model found","Could not find a model with the name: ",t);n.mainModel=e,n.mainState=i}},loadModel:function(t){if(o.utility.check(t,["string"],"this.useModel()")){var e=o.models[t],i=o.state[t];return e&&i?o.resource.controllerScope(e,i).model:o.error("No model found","Could not find a model with the name: ",t)}},model:function(t){if(o.utility.check(t,["string"],"this.model()")){var e=function(){return arguments.length?void o.utility.setState(n.mainModel,n.mainState,t,Array.prototype.join.call(arguments," ")):o.utility.getState(n.mainModel,n.mainState,selector)};return{poot:e,"yield":e}}},fn:function(t){return o.fns[t]},input:function(t){if(o.utility.check(t,["string"],"this.input()")){var i=o.utility.getSelector(n.mainModel,t),u=function(t){o.utility.setInputValue(i,t)};u.model=function(t){if(o.utility.check(t,["string"],"this.input().poot.model()")){var u=function(){n.functions.model(t).poot(o.utility.getInputValue(i))};return e(i).on("keyup",null,u),{off:function(){e(i).off("keyup",null,u)}}}};var l=function(t){var n=!1,o=function(){n=t(e(i).val())?!0:!1};e(i).on("keyup",null,o);var u=function(){e(i).off("keyup",null,o)},l=function(t){return n?t(e(i).val()):null,{off:u}};return{off:u,success:l}};return{poot:u,"yield":u,validate:l}}},button:function(t){if(o.utility.check(t,["string"],"this.button()")){var i=o.utility.getSelector(n.mainModel,t),u=function(t,n){if(o.utility.check(n,["function"],"this.button."+t+"()")){var u={};n=n.bind(u),u.off=function(){e(i).off(t,null,n)},e(i).on(t,null,n)}};return{click:u.bind(null,"click"),doubleclick:u.bind(null,"dblclick")}}},url:function(t){if(o.utility.check(t,["string"],"this.url()")){var i={url:t},u=function(t,e){return o.utility.check(t,["string"],"urlObj.option()")&&o.utility.check(e,["string"],"urlObj.option()")?(i[t]=e,this):void 0},l=function(t){if(o.utility.check(t,["string"],"urlObj.http()")){i.type=t||i.type;var u=e.ajax(i),l=function(){return u};return l.model=function(t){o.utility.check(t,["string"],"httpResponse.poot.model()")&&u.then(function(e){n.functions.model(t).poot(e)})},l}};return this.headers=u.bind(this,"headers"),this.data=u.bind(this,"data"),this.timeout=u.bind(this,"timeout"),this.option=u.bind(this),this.get=l.bind(this,"get"),this.post=l.bind(this,"post"),this.put=l.bind(this,"put"),this.patch=l.bind(this,"patch"),this["delete"]=l.bind(this,"delete"),this.http=l.bind(this),this}}},n.functions}},o.utility=o.utility||{},o.utility.clean=function(t){var i=e.extend(!0,{},t);return n(i),i},o.utility.makePathArray=function(t){return t.split(".")},o.utility.traverse=function(t,e){var i=t;for(var n in e)i=i[e[n]];return i},o.utility.mutate=function(t,e,i){var n=e.pop();o.utility.traverse(t,e)[n]=i},o.utility.getSelector=function(t,e){return e=o.utility.makePathArray(e),o.utility.traverse(t,e)},o.utility.getViewValue=function(t){return e(t).text()},o.utility.setViewValue=function(t,i){e(t).text(i)},o.utility.getInputValue=function(t){return e(t).val()},o.utility.setInputValue=function(t,i){e(t).val(i)},o.utility.getState=function(t,e,i){i=o.utility.makePathArray(i);var n=o.utility.traverse(t,i),u=o.utility.getViewValue(n);return o.utility.mutate(e,i,u),u},o.utility.setState=function(t,e,i,n){i=o.utility.makePathArray(i);var u=o.utility.traverse(t,i);o.utility.mutate(e,i,n),o.utility.setViewValue(u,n)},o.utility.check=function(t,e,i){return~e.indexOf(typeof t)&&null!==t?!0:(o.error("Incorrect parameter",i+" expected an argument of type "+e.join("||")+", but instead received: ",t||"null"),!1)},o.utility.css=function(t){var e=document.head,i=document.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t)),e.appendChild(i)},void e(function(){for(var t in o.controllers)o.controllers[t].call(new o.resource.controllerScope(o.models[t]||o.models.universal||{},o.state[t]||o.state.universal||{}));o.utility.css("poot, athlete { display: inline-block; }poothtml, athletehtml, bucket, template { display: block; }")})):(o.error("Missing dependency","Pooty requires jQuery or Zepto. Please include one of these."),null)}(window,window.$,window.JSON);